<html>
 <head>
	<meta charset="UTF-8">
	
<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
	<script src="https://unpkg.com/aframe-geometry-merger-component/dist/aframe-geometry-merger-component.min.js"></script>
	<!--script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script-->
   
	<script src="../js/covid19.js"></script>
	<script src="../js/gameLogic.js"></script>
	<script>
		window.onerror = function(message, source, lineno, colno, error) { alert([message,source,lineno,colno,error].join("\n"));}
		window.addEventListener('error', function(event) { alert(event); })		
	</script>
 </head>
 <body>
	
	<a-scene id="ascene" vr-mode-ui="enabled: false"background="color: #f0f0f0"  stats>
		<a-assets>
			<a-mixin rotation="90 0 0"
				geometry="primitive:torus;buffer: false;segments-radial:6;segments-tubular:8;radius:0.5" face-colors="color: coral" id="ator">
			</a-mixin>
			<a-mixin
				geometry="primitive:cylinder;buffer:false;segments-radial:6;radius:0.25;height:2.3" face-colors="color:mediumslateblue" id="acyl">
			</a-mixin>
			<a-mixin
				geometry="primitive:sphere;buffer:false;segments-height:9;segments-width:9;radius:5;" face-colors="color:mediumvioletred" id="asph">
			</a-mixin>
			<a-mixin geometry-merger="preserveOriginal: false" material="vertexColors: face" id="merge">
			</a-mixin>
			<a-mixin 
				animation__rxyz="property:rotation;from:0 0 0;to:360 360 360;dur:5000;loop:true;dir:normal;easing:linear;" id="Rxyz">
			</a-mixin>
			<a-mixin 
				animation__ry="property:rotation.y;from:0;to:360;dur:6000;loop:true;dir:normal;easing:linear;" id="Ry">
			</a-mixin>
			<a-mixin 
				animation__fx="property:object3D.position.x;to:20;loop:1;dur:5000;easing:easeInOutSine;startEvents:floatX;pauseEvents:pause, wOut" id="fx"
			>
			</a-mixin>
			<a-mixin 
				animation__fy="property:object3D.position.y;to:15;loop:1;dur:8000;easing:easeInOutSine;startEvents:floatY;pauseEvents:pause, wOut" id="fy"
			>
			</a-mixin>
			<a-mixin transparent="true"
				animation__wy="property:object3D.position.y;to:-15;loop:1;dur:2000;easing:easeInSine;startEvents:wOut;" 
				animation__wo="property:material.opacity;to:0;loop:1;dur:2000;easing:easeInSine;startEvents:wOut;" 
				id="washOut"
			>
			</a-mixin>
			<a-mixin transparent="true"	
				animation__wo="property:material.opacity;to:0;loop:1;dur:2000;easing:easeInSine;startEvents:wOut;" 
				id="washOutV"
			>
			</a-mixin>
		</a-assets>
		<!--a-marker preset='hiro'>
		  <!-- here define the content to display on top of the marker -- >
		  <a-sphere color="tomato" radius="0.2"></a-sphere>
		</a-marker-->
			<a-entity class="marker_washHands" position="0 0 -10">
				<a-entity class="tap" rotation="0 0 0">
					<a-entity class="tap_body">
						<a-cylinder radius="0.4" height="1.57" color="goldenrod"></a-cylinder>
						<a-cylinder radius="0.4" height="1" color="goldenrod" rotation="90 0 0" position="0 0.75 -0.5"></a-cylinder>
						<a-sphere radius="0.4" color="goldenrod" position="0 0.75 0"></a-sphere>
						<a-sphere radius="0.8" color="goldenrod" position="0 0.75 -1.3"></a-sphere>
						<a-cylinder radius="0.6" height="1.8" color="goldenrod" rotation="90 0 0" position="0 0.75 -2"></a-cylinder>
						<a-cylinder radius="0.3" height="1.57" color="goldenrod" position="0 1.7 -1.3"></a-cylinder>
						<a-sphere radius="0.5"  color="goldenrod" position="0 2.4 -1.3">
							<a-cylinder radius="0.2" height="1" color="goldenrod" rotation="90 0 0" position="0 0 -0.5">
								<a-sphere radius="0.4" color="goldenrod" position="0 -0.7 0"></a-sphere>
							</a-cylinder>
							<a-cylinder radius="0.2" height="1" color="goldenrod" rotation="-90 0 0" position="0 0 0.5">
								<a-sphere radius="0.4" color="goldenrod" position="0 -0.7 0"></a-sphere>
							</a-cylinder>
							<a-cylinder radius="0.2" height="1" color="goldenrod" rotation="0 0 90" position="0.5 0 0">
								<a-sphere radius="0.4" color="goldenrod" position="0 -0.7 0"></a-sphere>
							</a-cylinder>
							<a-cylinder radius="0.2" height="1" color="goldenrod" rotation="0 0 -90" position="-0.5 0 0">
								<a-sphere radius="0.4" color="goldenrod" position="0 -0.7 0"></a-sphere>
							</a-cylinder>
						</a-sphere>
						
					</a-entity>
					<a-entity class="flow">
						
					</a-entity>
				</a-entity>
			</a-entity>
	
	
		<!-- define a simple camera -->
		<a-entity camera position="0 0 0">
			<a-entity class="game_scene" id="game_washHands">
			<!-- debug planes -->
				<a-plane color="#8C8" height="40" width="2" rotation="0 -90 0" position="-22.5 0 -20" material="side: double;"></a-plane>
				<a-plane color="#8C8" height="40" width="2" rotation="0 -90 0" position=" 22.5 0 -20" material="side: double;"></a-plane>
				<a-plane color="#8C8" height="2" width="40" rotation="-90 0 0" position=" 0  -17 -20" material="side: double;"></a-plane>
				<a-plane color="#8C8" height="2" width="40" rotation="-90 0 0" position=" 0   17 -20" material="side: double;"></a-plane>
			
				<!-- nest all the entities that float within it's range-->
				<a-entity id="cov00" class="vParticle" position="0 0 -20" mixin="fx fy washOut" material="opacity: 0.5; transparent: true">
				</a-entity>			
			</a-entity>
		</a-entity>
   </a-scene>
   <script >
		document.getElementById("ascene").addEventListener('loaded',function(){
			initGame('washHands');
			markerHandler();
		});
		let v=document.getElementById("cov00");
   </script>
 </body>
</html>